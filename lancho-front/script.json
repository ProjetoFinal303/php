document.querySelectorAll('form').forEach(function(form) {
    form.addEventListener('submit', async function(e) {
        e.preventDefault();
        var resp = document.getElementById('response');
        if (!resp) return;

        // Pega os dados do formulÃ¡rio como objeto
        const formData = new FormData(form);
        const data = {};
        formData.forEach((value, key) => data[key] = value);

        let url = '';
        let method = 'POST';

        // Define qual API chamar baseado no id do form (ajuste conforme seus forms)
        if (form.id === 'criarProdutoForm') url = '/php/api/produto/create.php';
        if (form.id === 'atualizarProdutoForm') url = '/php/api/produto/update.php';
        if (form.id === 'deletarProdutoForm') url = '/php/api/produto/delete.php';
        // Adicione outros forms (clientes, pedidos, etc.) conforme seu sistema

        try {
            const response = await fetch(url, {
                method: method,
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });
            const json = await response.json();
            resp.textContent = JSON.stringify(json, null, 2);
        } catch (err) {
            resp.textContent = 'Erro ao chamar a API: ' + err;
        }
    });
});
